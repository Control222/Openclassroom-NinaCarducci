const images = document.querySelectorAll('source[data-srcset]');
console.log(`Found ${images.length} images with data-srcset.`),
  images.forEach((t) => {
    let e = t.getAttribute('data-srcset');
    e = e.replace(/\s+/g, ' ').trim();
    let i = window.innerWidth;
    console.log(`Processing image with clientWidth: ${i}`);
    let s = e.split(',')[0].trim();
    e.split(',').forEach((t) => {
      let [e, r] = t.trim().split(' '),
        a = parseInt(r.trim(), 10);
      console.log(`Evaluating option: src=${e}, width=${a}`), a <= i && (s = e);
    }),
      (t.srcset = s),
      console.log(`Best match for the image: ${s}`);
  });
